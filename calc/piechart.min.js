var labelset=["US Total Equity","US Small Cap Value Equity","International Equity","REIT","Emerging Mkt Stock","Dividend Stock","Preferred Stock","US Total Bond Mkt","Treasury Inflation Prot Sec","INTL Total Bond Mkt","Short Term Bond","Inv Grade Bond Ladder","Emerging Market Bond","High Yield Bond","Cash / MM"],stockCount=7,ageRange="";function buildStockBondAllocationsText(e){for(var t=0,a=0,n=0;n<e.length;n++)n<stockCount?t+=e[n]:a+=e[n];return t+"% / "+a+"%"}var explanationToUse,fundFamilies={"Yield Optimized Portfolio":[{name:"Vanguard Total Stock Market ETF (VTI)",expenseRatio:.04},{name:"Vanguard Small Cap Value ETF (VBR)",expenseRatio:.07},{name:"Vanguard FTSE Developed Markets ETF (VEA)",expenseRatio:.07},{name:"PowerShares KBW Premium Yield Equity REIT ETF (KBWY)",expenseRatio:.35},{name:"Vanguard FTSE Emerging Markets ETF (VWO) ",expenseRatio:.14},{name:"Vanguard Dividend Appreciation ETF (VIG) ",expenseRatio:.08},{name:"PowerShares Variable Rate Preferred Portfolio (VRP)",expenseRatio:.5},{name:"Vanguard Total Bond Market ETF (BND) ",expenseRatio:.05},{name:"Vanguard Short-Term Inflation-Protected Sec Index ETF (VTIP)",expenseRatio:.06},{name:"Vanguard Total Intl Bd Idx ETF (BNDX)",expenseRatio:.11},{name:"Vanguard Short-Term Bond ETF (BSV)",expenseRatio:.07},{name:"US and INTL Rolling Bond Ladder - Investment Grade w/ Maturities 2-12 yrs",expenseRatio:"N/A"},{name:"Vanguard Emerging Markets Government Bond Index ETF (VWOB)",expenseRatio:.32},{name:"SPDR Barclays High Yield Bond (JNK)",expenseRatio:.4},{name:"Cash/Money Market",expenseRatio:"N/A"}],"EISRC Standard (Use Schwab ETFs where possible)":[{name:"Schwab U.S. Broad Equity ETF (SCHB)",expenseRatio:.03},{name:"Vanguard Small Cap Value ETF (VBR)",expenseRatio:.07},{name:"Schwab International Equity ETF (SCHF)",expenseRatio:.06},{name:"Schwab US REIT ETF (SCHH)",expenseRatio:.07},{name:"Schwab Emerging Markets Equity ETF (SCHE)",expenseRatio:.13},{name:"Schwab US Dividend Equity (SCHD)",expenseRatio:.07},{name:"PLACE_HOLDER_FOR_PREFERRED_STOCK",expenseRatio:0},{name:"Schwab U.S. Aggregate Bond ETF (SCHZ)",expenseRatio:.04},{name:"Schwab US TIPS ETF (SCHP)",expenseRatio:.05},{name:"Vanguard Total Intl Bd Idx ETF (BNDX)",expenseRatio:.11},{name:"Vanguard Short-Term Bond ETF (BSV)",expenseRatio:.07},{name:"US and INTL Rolling Bond Ladder - Investment Grade w/ Maturities 2-12 yrs",expenseRatio:"N/A"},{name:"PowerShares Emerging Markets Sov Dbt ETF (PCY)",expenseRatio:.5},{name:"SPDR Barclays High Yield Bond (JNK)",expenseRatio:.4},{name:"Cash/Money Market",expenseRatio:"N/A"}],"EISRC Standard Index Portfolio":[{name:"Vanguard Total Stock Market ETF (VTI)",expenseRatio:.04},{name:"Vanguard Small Cap Value ETF (VBR)",expenseRatio:.07},{name:"Vanguard FTSE Developed Markets ETF (VEA)",expenseRatio:.07},{name:"Vanguard REIT ETF (VNQ)",expenseRatio:.12},{name:"Vanguard FTSE Emerging Markets ETF (VWO) ",expenseRatio:.14},{name:"Vanguard Dividend Appreciation ETF (VIG)",expenseRatio:.08},{name:"PLACE_HOLDER_FOR_PREFERRED_STOCK",expenseRatio:0},{name:"Vanguard Total Bond Market ETF (BND) ",expenseRatio:.05},{name:"Vanguard Short-Term Inflation-Protected Sec Index ETF (VTIP)",expenseRatio:.06},{name:"Vanguard Total Intl Bd Idx ETF (BNDX)",expenseRatio:.11},{name:"Vanguard Short-Term Bond ETF (BSV)",expenseRatio:.07},{name:"US and INTL Rolling Bond Ladder - Investment Grade w/ Maturities 2-12 yrs",expenseRatio:"N/A"},{name:"Vanguard Emerging Markets Government Bond Index ETF (VWOB)",expenseRatio:.32},{name:"SPDR Barclays High Yield Bond (JNK)",expenseRatio:.4},{name:"Cash/Money Market",expenseRatio:"N/A"}]},datasetRegular=[[38,17,16,9,12,,,7,,,,,,,1],[36,16,15,9,12,,,11,,,,,,,1],[33,14,15,9,11,3,,11,,,,,3,,1],[30,12,14,9,10,5,,11,2,2,,,4,,1],[27,11,14,9,9,5,,11,2,2,,,5,4,1],[24,9,13,9,8,5,,10,4,3,3,,6,5,1],[22,6,13,9,7,6,,11,6,4,4,,6,5,1],[21,6,12,9,6,6,,12,6,5,5,,5,5,2],[17,5,10,8,5,5,,18,6,6,6,,5,5,4],[14,4,7,7,3,5,,22,9,7,7,,5,5,5],[10,3,3,5,,4,,24,11,7,15,,3,3,12],[9,,3,3,,,,26,13,7,20,,,,19]],messageRiskGroup2="A slightly more conservative allocation than normal is being displayed because you may have inadequate funding to weather portfolio losses.",messageRiskGroup3="A more conservative allocation than normal is being displayed because you have inadequate funding to weather portfolio losses.",messageRiskGroup4="A much more conservative allocation than normal is being displayed because you have severely inadequate funding to weather portfolio losses.",explanationRegular=["","","","","","","","","",messageRiskGroup2,messageRiskGroup3,messageRiskGroup4],datasetLessThan20K=[[92,0,0,0,0,0,,8,0,0,0,0,0,0,0],[88,0,0,0,0,0,,12,0,0,0,0,0,0,0],[85,0,0,0,0,0,,15,0,0,0,0,0,0,0],[80,0,0,0,0,0,,20,0,0,0,0,0,0,0],[75,0,0,0,0,0,,25,0,0,0,0,0,0,0],[68,0,0,0,0,0,,32,0,0,0,0,0,0,0],[63,0,0,0,0,0,,37,0,0,0,0,0,0,0],[60,0,0,0,0,0,,40,0,0,0,0,0,0,0],[55,0,0,0,0,0,,45,0,0,0,0,0,0,0],[45,0,0,0,0,0,,55,0,0,0,0,0,0,0],[30,0,0,0,0,0,,70,0,0,0,0,0,0,0],[20,0,0,0,0,0,,80,0,0,0,0,0,0,0]],basicMessageLessThan20K="Since your account size is under 20k, a simple allocation of one Total Bond Market fund and one Total Stock Market fund is displayed. This avoids excessive transaction costs.",explanationLessThan20K=[basicMessageLessThan20K,basicMessageLessThan20K,basicMessageLessThan20K,basicMessageLessThan20K,basicMessageLessThan20K,basicMessageLessThan20K,basicMessageLessThan20K,basicMessageLessThan20K,basicMessageLessThan20K,basicMessageLessThan20K+" "+messageRiskGroup2,basicMessageLessThan20K+" "+messageRiskGroup3,basicMessageLessThan20K+" "+messageRiskGroup4],datasetRichAndOld=[[],[],[],[],[],[],[20,6,13,9,7,5,,,6,,5,17,6,5,1],[18,5,12,9,6,5,,,6,,6,20,5,5,3],[17,5,10,8,5,5,,,6,,6,24,5,5,4],[14,4,7,7,3,5,,,9,,7,29,5,5,5],[10,3,3,5,,4,,,11,,15,31,3,3,12],[9,,3,3,,,,,13,,20,33,,,19]],basicMessageRichAndOld="Although individual bonds are not a normal part of an index porfolio, many investors with this size account choose to own bond ladders instead of bond funds to assure return of a defined level of capital each year.",explanationRichAndOld=["","","","","","",basicMessageRichAndOld,basicMessageRichAndOld,basicMessageRichAndOld,basicMessageRichAndOld+" "+messageRiskGroup2,messageRiskGroup3,messageRiskGroup4],datasetRegularHighYield=[[36,16,15,11,12,2,0,3,,,,,2,2,1],[34,14,15,11,11,3,2,5,,,,,2,2,1],[30,12,14,12,11,5,3,6,,,,,3,3,1],[26,10,12,12,9,8,5,6,2,2,,,4,3,1],[23,8,11,13,7,10,6,6,2,2,,,6,5,1],[20,6,10,13,6,10,6,8,3,3,3,,6,5,1],[18,5,9,13,5,10,6,10,4,4,4,,6,5,1],[17,4,9,13,4,10,6,13,4,5,5,,5,5,1],[16,3,8,13,3,9,6,15,4,6,5,,5,5,2],[15,2,6,10,2,7,5,20,6,6,6,,5,5,5],[10,2,3,8,,6,3,22,9,6,13,,3,3,12],[9,,2,5,,4,2,23,10,6,20,,,,19]],datasetToUse=datasetRegular;function replaceUndefinedWithZero(e){return Array.apply(null,e).map(function(e){return void 0===e?0:e})}function prepareDataSet(e){for(var t=0;t<e.length;t++)0!==e[t].length&&(e[t]=replaceUndefinedWithZero(e[t]))}function calculateRiskGroupIndex(e){var t=+e.age(),a=+e.retirementAge(),n=1e3*+e.asset(),o=+e.monthlySavings(),s=+e.monthlyRetirementIncome(),r=+e.lifeExpectancy(),i=n,l=calculateMonthlyReturnFromAnnualReturn((+e.realReturnRate()-+e.inflationRate())/100),d=0;if(t<a&&a<=r){if(d=calcuateRemainingAssetWithMonthlyDistribution(i=calcuateLumpsumReturn(n,l,12*(a-t))+calculateMonthlyReturn(o,l,12*(a-t)),l,12*(r-a),s),0===i)return console.log("no asset at retirement"),$("#message").removeClass(),$("#message").addClass("alert alert-danger"),e.userMessage("You will not have any assets at retirement."),3;var u=-1;if(d<0&&(u=0===l?i/s:Math.log(1/(1-i*l/(s*(1+l))))/Math.log(1+l)),console.log("assetAtRetirement = "+i),console.log("remainingAssetAtDeath = "+d),.5<=(c=d/i))return console.log("rich at death"),$("#message").removeClass(),$("#message").addClass("alert alert-success"),e.userMessage("You will have <b>$"+formatMoney(d)+"</b> left for your estate, in today's dollars."),0;if(c<.5&&0<=c)return console.log("ok at death"),$("#message").removeClass(),$("#message").addClass("alert alert-success"),e.userMessage("You will have <b>$"+formatMoney(d)+"</b> left for your estate, in today's dollars."),1;if(c<0&&-.1<=c)return console.log("poor at death"),$("#message").removeClass(),$("#message").addClass("alert alert-warning"),e.userMessage(formatAssetRunOutMessage(t,a,u)),2;if(c<-.1)return console.log("starving at death"),$("#message").removeClass(),$("#message").addClass("alert alert-danger"),e.userMessage(formatAssetRunOutMessage(t,a,u)),3}else if(a<=t&&t<r){if(a=t,0===(i=n))return console.log("no asset at retirement"),$("#message").removeClass(),$("#message").addClass("alert alert-danger"),e.userMessage("You will not have any assets at retirement."),3;var c;u=-1;if((d=calcuateRemainingAssetWithMonthlyDistribution(i,l,12*(r-t),s))<0&&(u=0===l?i/s:Math.log(1/(1-i*l/(s*(1+l))))/Math.log(1+l)),console.log("assetAtRetirement = "+i),console.log("remainingAssetAtDeath = "+d),.5<=(c=d/i))return console.log("rich at death"),$("#message").removeClass(),$("#message").addClass("alert alert-success"),e.userMessage("You will have <b>$"+formatMoney(d)+"</b> left for your estate, in today's dollars."),0;if(c<.5&&0<=c)return console.log("ok at death"),$("#message").removeClass(),$("#message").addClass("alert alert-success"),e.userMessage("You will have <b>$"+formatMoney(d)+"</b> left for your estate, in today's dollars."),1;if(c<0&&-.1<=c)return console.log("poor at death"),$("#message").removeClass(),$("#message").addClass("alert alert-warning"),e.userMessage(formatAssetRunOutMessage(t,a,u)),2;if(c<-.1)return console.log("starving at death"),$("#message").removeClass(),$("#message").addClass("alert alert-danger"),e.userMessage(formatAssetRunOutMessage(t,a,u)),3}else{if(t<r&&r<=a)return 0===(i=calcuateLumpsumReturn(n,l,12*(r-t))+calculateMonthlyReturn(o,l,12*(r-t)))?(console.log("no asset at retirement"),$("#message").removeClass(),$("#message").addClass("alert alert-danger"),e.userMessage("You will not have any assets at retirement. Retirement Age should not exceed Life Expectancy.  Please update assumption."),3):(d=i,$("#message").removeClass(),$("#message").addClass("alert alert-success"),e.userMessage("You will have <b>$"+formatMoney(d)+"</b> left for your estate, in today's dollars. Retirement Age should not exceed Life Expectancy.  Please update assumption."),0);if(r<=t)return 0===i?(console.log("no asset at retirement"),$("#message").removeClass(),$("#message").addClass("alert alert-danger"),e.userMessage("You will not have any assets at retirement. Current Age should not exceed Life Expectancy.  Please update assumption."),3):(s<=i*l?($("#message").removeClass(),$("#message").addClass("alert alert-success"),e.userMessage("Your assets are not likely to run out in your lifetime. Current Age should not exceed Life Expectancy.  Please update assumption.")):(u=0===l?i/s:Math.log(1/(1-i*l/(s*(1+l))))/Math.log(1+l),$("#message").removeClass(),$("#message").addClass("alert alert-warning"),e.userMessage(formatAssetRunOutMessage(t,a,u)+" Current Age should not exceed Life Expectancy.  Please update assumption.")),0)}}function roundToTwoDecimal(e){var t=+(Math.round(e+"e+2")+"e-2");return t%1==0?parseInt(t):t.toFixed(2)}function formatMoney(e){return e<1e3?Math.round(e):1e3<=e&&e<1e6?numberWithCommas(Math.round(e)):1e6<=e&&e<1e9?roundToTwoDecimal(e/1e6)+"M":1e9<=e&&e<1e12?roundToTwoDecimal(e/1e9)+"B":roundToTwoDecimal(e/1e12)+"T"}function formatAssetRunOutMessage(e,t,a){var n=e<t?t:e,o=e<t;return a<1?"Your assets will run out "+(o?"":"in ")+"<b>less than 1 month</b>"+(o?" after you retire":"")+".":a<2?"Your assets will run out "+(o?"":"in ")+"<b>1 month</b>"+(o?" after you retire":"")+".":a<12?"Your assets will run out <b>"+(o?"":"in ")+Math.round(a)+" months</b>"+(o?" after you retire":"")+".":"Your assets will run out at age <b>"+Math.round(n+a/12)+"</b>."}function runCalculation(e){var t=getDataSetAndExplanation(e).dataset,a=getDatasetIndexAndAgeRange(e).datasetIndex,n=getFunds(t[a],e.selectedFundFamily());return console.log(e.userMessage()),{riskGroupIndex:calculateRiskGroupIndex(e),remainingAssetsMessage:e.userMessage(),explanation:getDataSetAndExplanation(e).explanation[a],ageRange:getDatasetIndexAndAgeRange(e).ageRange,funds:n.funds,averageExpenseRatio:n.averageExpenseRatio,allocationText:buildStockBondAllocationsText(t[a])}}function allocateAsset(e){runCalculation(e);var t=getDatasetIndexAndAgeRange(e);explanationToUse=getDataSetAndExplanation(e).explanation,datasetToUse=getDataSetAndExplanation(e).dataset,ageRange=t.ageRange;t.riskGroupIndex;var a=t.datasetIndex,n=!1,o=[];if(void 0===svg||void 0===svg.data())initializeSvg(datasetToUse[a]),$("#explanation").text(explanationToUse[a]),userInputVM.currentDatasetIndex(a),refreshFundsTable(userInputVM.currentDatasetIndex(),userInputVM.selectedFundFamily());else{o=svg.data()[0];for(var s=0;s<datasetToUse.length;s++)if(o[s]!==datasetToUse[a][s]){n=!0;break}n&&(console.log("Allocation changed. updating pie and table."),userInputVM.currentDatasetIndex(a),setData(a),refreshFundsTable(userInputVM.currentDatasetIndex(),userInputVM.selectedFundFamily()),$("#explanation").text(explanationToUse[a]))}}function getDataSetAndExplanation(e){var t,a;return e.isHighYield()?(t=datasetRegularHighYield,a=explanationRegular):e.asset()<20?(t=datasetLessThan20K,a=explanationLessThan20K):isRichAndOld(e)?(t=datasetRichAndOld,a=explanationRichAndOld):(t=datasetRegular,a=explanationRegular),{dataset:t,explanation:a}}function getDatasetIndexAndAgeRange(e){var t,a=+e.age(),n=0,o=calculateRiskGroupIndex(e);return a<=25?(n=0,t="10-25"):25<a&&a<=35?(n=1,t="25-35"):35<a&&a<=40?(n=2,t="35-40"):40<a&&a<=45?(n=3,t="40-45"):45<a&&a<=50?(n=4,t="45-50"):50<a&&a<=55?(n=5,t="50-55"):55<a&&a<=60?(n=6,t="55-60"):60<a&&a<=65?(n=7,t="60-65"):(n=8+o,t="65+ RG"+o),{datasetIndex:n,ageRange:t,riskGroupIndex:o}}prepareDataSet(datasetRegular),prepareDataSet(datasetLessThan20K),prepareDataSet(datasetRichAndOld),prepareDataSet(datasetRegularHighYield);var color=null;function getFunds(e,t){var a=[],n=0,o=labelset.length;t=userInputVM.isHighYield()?"Yield Optimized Portfolio":t;for(var s=0;s<o;s++)if(0<e[s]){var r=fundFamilies[t][s].expenseRatio;a.push({allocation:e[s],assetClass:labelset[s],fundName:fundFamilies[t][s].name,expenseRatio:r,fundColor:color(s)}),n+=("N/A"==r?0:r)*e[s]/100}return{funds:a,averageExpenseRatio:n}}function refreshFundsTable(e,t){var a=getFunds(datasetToUse[e],t),n=a.funds,o=a.averageExpenseRatio;n.push({allocation:"",assetClass:"",fundName:"",expenseRatio:"",fundColor:""}),$("#tbodyFunds").fadeOut(400,function(){userInputVM.funds.removeAll(),userInputVM.funds(n),$("#tbodyFunds tr:last").replaceWith('<tr><td colspan="3" class="text-right">Total Expense Ratio (excludes possible commissions / advisor fees):</td><td class="text-center">'+formatExpenseRatio(o)+"</td></tr>"),$("#tbodyFunds").fadeIn()})}function isRichAndOld(e){return 1500<=e.asset()&&55<e.age()}function formatExpenseRatio(e){return isNaN(e)?e:Number(e).toFixed(2)+"%"}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}"undefined"==typeof d3?(console.warn("d3 is not defined"),color=function(){}):color=d3.scale.category20();var eisrcPdfParameters={"retirementportfolio.org":{logo:"rp_org_logo",copyrightOwner:"EISRC and RetirementPortfolio.org",contactUrl:"/contact",orgNameInPdfFooter:"EISRC and RetirementPortfolio.org are"},"eisrc.com":{logo:"eisrc_logo",copyrightOwner:"EISRC",contactUrl:"/contact",orgNameInPdfFooter:"EISRC is"}},pdfParameterToPrint=eisrcPdfParameters["retirementportfolio.org"];function fundTableToPdf(e){dd.content[0].columns=[{image:pdfParameterToPrint.logo},{text:"Model Portfolio",style:"title"},{text:""}],dd.content[1].table.body[1][1]=ageRange,dd.content[2].table.body[1][1]=buildStockBondAllocationsText(e);for(var t=1,a=dd.content[3].table.body=dd.content[3].table.body.slice(0,t),n=labelset.length,o=0,s=userInputVM.isHighYield()?"Yield Optimized Portfolio":userInputVM.selectedFundFamily(),r=fundFamilies[s],i=0;i<n;i++)0<e[i]&&(a[t]=[{text:e[i]+"%",alignment:"center"},labelset[i],r[i].name,{text:"N/A"===r[i].expenseRatio?"N/A":r[i].expenseRatio+"%",alignment:"center"}],o+=("N/A"==r[i].expenseRatio?0:r[i].expenseRatio)*e[i]/100,t++);a.push([{text:"Total Portfolio Expense Ratio (excludes possible commissions / advisor fees):",colSpan:3,alignment:"right"},"","",{text:formatExpenseRatio(o),alignment:"center"}])}/eisrc.com$/.test(document.location.hostname)&&(pdfParameterToPrint=eisrcPdfParameters["eisrc.com"]);var userInputVM,dd={content:[{columns:[{image:"rp_org_logo"},{text:"Model Portfolio",style:"title"}]},{style:"tableExample",table:{widths:["*",100,100],headerRows:1,body:[[{text:"Portfolio",style:"tableHeader"},{text:"Age Range",style:"tableHeader"},{text:"Type of Account",style:"tableHeader"}],["Index ETF Portfolio","{{ageRange}}","Retirement"]]},layout:"lightHorizontalLines"},{style:"tableExample",table:{widths:["*",100],headerRows:1,body:[[{text:"Rebalancing Frequency",style:"tableHeader"},{text:"Stock / Bond Ratio",style:"tableHeader"}],["Monitor monthly but only rebalance when the asset allocation has drifted outside preset percentage band (10%), first use portfolio cashflows then use asset sale.","{{ratio}}"]]},layout:"lightHorizontalLines"},{style:"tableExample",table:{widths:[60,100,"*",75],headerRows:1,body:[[{text:"Allocation",style:"tableHeader"},{text:"Asset Class",style:"tableHeader"},{text:"Fund Name",style:"tableHeader"},{text:"Expense Ratio",style:"tableHeader"}],["Sample value 1","Sample value 2","Sample value 3","0.1%"],["Sample value 1","Sample value 2","Sample value 3","0.1%"]]},layout:"lightHorizontalLines"},{text:"The information provided above is for educational purposes only and is not intended as specific investment advice for you. Fund expense ratios last updated on 4/5/2018.  Model Portfolios provided courtesy of EISRC.  "+pdfParameterToPrint.orgNameInPdfFooter+" not providing or offering to provide services or advice to you and will not be liable for any losses you may incur as a result of any investment decision made.",style:"footer"}],styles:{title:{fontSize:16,bold:!0,margin:[0,6,0,0]},header:{fontSize:18,bold:!0,margin:[0,0,0,10]},subheader:{fontSize:16,bold:!0,margin:[0,10,0,5]},tableExample:{margin:[0,5,0,15]},tableHeader:{bold:!0,fontSize:10,color:"#383838"},footer:{fontSize:8,italics:!0,color:"gray"}},images:{rp_org_logo:"data:image/png;base64,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",eisrc_logo:"data:image/jpg;base64,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"},defaultStyle:{fontSize:10,color:"#383838"}};function calculateMonthlyReturn(e,t,a){if(0===t)return e*a;var n=1+t;return e*n*(Math.pow(n,a-1)-1)/t}function calcuateLumpsumReturn(e,t,a){return e*Math.pow(1+t,a)}function calcuateRemainingAssetWithMonthlyDistribution(e,t,a,n){if(0===t)return e-a*n;var o=1+t;return e*Math.pow(o,a)-n*o*(Math.pow(o,a-1)-1)/t}function calculateMonthlyReturnFromAnnualReturn(e){return Math.pow(1+e,1/12)-1}function UserInputViewModel(){var t=this;t.age=ko.observable(32,{persist:"age"}),t.retirementAge=ko.observable(65,{persist:"retirementAge"}),t.alreadyRetired=ko.computed(function(){return+t.retirementAge()<=+t.age()}),t.asset=ko.observable(100,{persist:"asset"}),t.formattedAsset=ko.computed({read:function(){return Number(1e3*this.asset()).toLocaleString()},write:function(e){this.asset(Number(e.replace(/,/g,""))/1e3)},owner:this}),t.monthlySavings=ko.observable(500,{persist:"monthlySavings"}),t.formattedMonthlySavings=ko.computed({read:function(){return Number(this.monthlySavings()).toLocaleString()},write:function(e){this.monthlySavings(Number(e.replace(/,/g,"")))},owner:this}),t.monthlyRetirementIncome=ko.observable(5e3,{persist:"monthlyRetirementIncome"}),t.formattedMonthlyRetirementIncome=ko.computed({read:function(){return Number(this.monthlyRetirementIncome()).toLocaleString()},write:function(e){this.monthlyRetirementIncome(Number(e.replace(/,/g,"")))},owner:this}),t.lifeExpectancy=ko.observable(95,{persist:"lifeExpectancy"}),t.realReturnRate=ko.observable(8,{persist:"realReturnRate"}),t.inflationRate=ko.observable(3,{persist:"inflationRate"}),t.userMessage=ko.observable("",{persist:"userMessage"}),t.changeAssumptionsText=ko.observable("Show Assumptions",{persist:"changeAssumptionsText"}),t.changeAssumptions=function(){$(".additionalControls").is(":visible")?t.changeAssumptionsText("Show Assumptions"):t.changeAssumptionsText("Hide Assumptions"),$(".additionalControls").slideToggle()},t.resetToDefault=function(){t.age(32),t.retirementAge(65),t.asset(100),t.monthlySavings(500),t.monthlyRetirementIncome(5e3),t.lifeExpectancy(95),t.realReturnRate(8),t.inflationRate(3),t.asset(100),t.changeAssumptionsText("Show Assumptions"),$(".additionalControls").hide(),allocateAsset(userInputVM)},t.currentDatasetIndex=ko.observable(0,{persist:"currentDatasetIndex"}),t.selectedFundFamily=ko.observable("EISRC Standard Index Portfolio",{persist:"selectedFundFamily"}),t.preferredFundFamilies=ko.observableArray(["EISRC Standard Index Portfolio","EISRC Standard (Use Schwab ETFs where possible)"]),t.funds=ko.observableArray(),t.selectedFundFamily.subscribe(function(e){console.log(e),refreshFundsTable(t.currentDatasetIndex(),e)}),t.isHighYield=ko.observable(!1,{persist:"isHighYield"})}$.fn&&($.fn.slider.Constructor.prototype.disable=function(){this.picker.off()},$.fn.slider.Constructor.prototype.enable=function(){this.touchCapable?this.picker.on({touchstart:$.proxy(this.mousedown,this)}):this.picker.on({mousedown:$.proxy(this.mousedown,this)})}),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};var previousMonthlySavings=0,lastSliderStopAlreadyRetired=!1;function handleSlideStop(e){var t=e.target;if("number"===t.getAttribute("type")){var a=+t.getAttribute("min"),n=+t.getAttribute("max");t.value<a?t.value=a:t.value>n&&(t.value=n),ko.dataFor(t)[t.getAttribute("id")](t.value)}userInputVM.alreadyRetired()&&!lastSliderStopAlreadyRetired?(previousMonthlySavings=userInputVM.monthlySavings(),userInputVM.monthlySavings(0),lastSliderStopAlreadyRetired=!0,$("#monthlySavings").prop("title","Monthly savings is assumed to be 0 when in retirement"),$("#monthlySavings-slider input").slider("disable"),$("#monthlySavings-slider").prop("title","Monthly savings is assumed to be 0 when in retirement")):!userInputVM.alreadyRetired()&&lastSliderStopAlreadyRetired&&(userInputVM.monthlySavings(previousMonthlySavings),previousMonthlySavings=0,lastSliderStopAlreadyRetired=!1,$("#monthlySavings").prop("title",""),$("#monthlySavings-slider input").slider("enable"),$("#monthlySavings-slider").prop("")),allocateAsset(userInputVM)}ko.bindingHandlers.sliderValue={init:function(e,t,a,n,o){var s=t();$(e).slider("setValue",s()),$(e).on("slide",function(e){s(e.value)})},update:function(e,t,a,n,o){var s=+t()();0!==e.id.indexOf("realReturnRate")&&0!==e.id.indexOf("inflationRate")||(s=s.toFixed(1),0===e.id.indexOf("realReturnRate")?userInputVM.realReturnRate(s):userInputVM.inflationRate(s)),$(e).slider("setValue",s)}};var svg,path,pie,arc,labelr,labelMargin,dataArcs,arcs,eisrcDisclaimerContent="<p>The purpose of this tool is to provide a sample investment portfolio to prospective EISRC clients given an investor's current age, funds, and retirement time horizon.  The tool will provide transparency regarding how EISRC invests for a typical client. If you are not yet a client, the information provided by this tool is for educational purposes only and is not intended as specific investment advice for you. It is based on inputs and assumptions provided by you. The calculations and portfolio provided do not infer that EISRC assumes any fiduciary duties unless there is an Investment Advisory Agreement / Contract in place with you and EISRC. The calculations and portfolio provided should not be construed as financial, legal or tax advice. This information, including expense ratios, is supplied from sources we believe to be reliable but we cannot guarantee its accuracy. The sole purpose of the Retirement Projection section of the tool is to determine whether the investor is likely to have adequate funding to retire. Accordingly, at age 65 and older, if the investor has inadequate retirement funding, a more conservative portfolio than normal is displayed in order to conserve the assets the investor has. It is assumed that the \"Monthly Savings\" input is expressed in today's dollars and will have to be adjusted each year for inflation. The assumed rate of return used by the Retirement Projection is setup in the assumptions section as a fixed amount and is in no way tied to past performance of the specific portfolio displayed. Past performance does not guarantee nor indicate future results. </p><p>The Model Portfolio displayed consists primarily of low-cost Index Exchange-Traded Funds and is based on research from EISRC, a fee-only, independent Registered Investment Advisor firm in the State of Oregon. EISRC is not providing investment advice through this tool, but rather providing an example of a typical EISRC client portfolio. If you are an Oregon resident, an institution or an accredited investor please contact EISRC for more details and specific advice tailored for you. </p><p>I acknowledge that I have read and agree to the above Terms and Conditions.  I also agree to the EISRC website terms of service and have read the privacy policy and site disclaimer which are available through the links at the bottom of the EISRC home page.</p>";function initializeSvg(e){if("undefined"!=typeof d3){var t=$("#pieAllocation"),a=0,n=$(".container").width()<768;n&&(t.width(200),t.height(180),a=$(".container").width()/2);var o=n?200:620,s=n?180:310,r=n?Math.min(o,s)/2:Math.min(o,s)/2*.75,i=r-10,l=n?.7*i:.6*i;arc=d3.svg.arc().innerRadius(l).outerRadius(i),(svg=d3.select("#pieAllocation").append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(o,s)+" "+Math.min(o,s)).attr("preserveAspectRatio","xMinYMin").data([e])).append("text").attr("x",n?a+3:o/2+10).attr("y",s/2+5).attr("id","stockBondAllocations").attr("fill","DarkGray").attr("text-anchor","middle").attr("font-size","18px").attr("font-weight","bold").text(buildStockBondAllocationsText(e)),svg.append("text").attr("x",n?a-23:o/2-18).attr("y",s/2+20).attr("id","stockText").attr("fill","DarkGray").attr("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold").text("Stock"),svg.append("text").attr("x",n?a+28:o/2+35).attr("y",s/2+20).attr("id","bondText").attr("fill","DarkGray").attr("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold").text("Bond"),pie=d3.layout.pie().value(function(e){return e}).sort(null),dataArcs=svg.selectAll("g.arc").data(pie),arcs=dataArcs.enter().append("g").attr("class","arc").attr("transform","translate("+(n?a:o/2+10)+", "+(s/2+5)+")"),path=arcs.append("path").attr("fill",function(e,t){return color(t)}).attr("d",arc).style("stroke","white").style("stroke-width",1).each(function(e){this._current=e});var d=buildTextPosition();arcs.append("text").attr("transform",function(e,t){return"translate("+d[t][0]+","+d[t][1]+")"}).attr("text-anchor",function(e,t){return t===labelset.length-1&&e.value<=5?"start":(e.endAngle+e.startAngle)/2>Math.PI?"end":"start"}).text(function(e,t){return 0===e.value?"":labelset[t]+" "+e.value+"%"}),n&&$("g text").hide()}else console.warn("d3 is undefined")}function setData(e){svg.data([datasetToUse[e]]),pie=d3.layout.pie().value(function(e){return e}).sort(null),(path=path.data(pie)).transition().duration(750).attrTween("d",arcTween),svg.select("#stockBondAllocations").text(buildStockBondAllocationsText(datasetToUse[e]));var a=buildTextPosition();svg.selectAll("g text").data(pie).transition().duration(800).tween("text",function(e){var t=d3.interpolate(this.textContent,e);return function(e){this.textContent=Math.round(t(e))}}).attr("transform",function(e,t){return"translate("+a[t][0]+","+a[t][1]+")"}).attr("text-anchor",function(e,t){return t===labelset.length-1&&e.data<6?"start":(e.endAngle+e.startAngle)/2>Math.PI?"end":"start"}).text(function(e,t){return 0===e.value?"":labelset[t]+" "+e.value+"%"})}function buildTextPosition(){var t=[];if(path.each(function(e){t.push(arc.centroid(e))}),0==t.length)return[];var a=Math.sqrt(t[0][0]*t[0][0]+t[0][1]*t[0][1]);return t.map(function(e){e[0]=125*e[0]/a,e[1]=125*e[1]/a}),addOffsetToY(t),t}function addOffsetToY(e){if(0!=e.length)for(var t=1;t<e.length-1;t++)if(0!==datasetToUse[userInputVM.currentDatasetIndex()][t]){var a=lastIndexOfNonZeroItem(t,datasetToUse[userInputVM.currentDatasetIndex()]);-1!==a&&(0<e[t][0]&&e[t][1]-e[a][1]<15&&(e[t][1]=e[a][1]+15),!isFirstItemOnLeft(t,e)&&e[t][0]<=0&&e[a][1]-e[t][1]<15&&(e[t][1]=e[a][1]-15))}}function isFirstItemOnLeft(e,t){var a=lastIndexOfNonZeroItem(e,datasetToUse[userInputVM.currentDatasetIndex()]);return-1!=a&&(t[e][0]<=0&&0<=t[a][0])}function lastIndexOfNonZeroItem(e,t){if(e>t.length-1||0==e)return-1;for(var a=e-1;-1<a;a--)if(0!==t[a])return a;return-1}function arcTween(e){var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){return arc(t(e))}}$(function(){/eisrc.com$/.test(document.location.hostname)&&$("#top-logo").attr("src","http://eisrc.com/wp-content/uploads/2014/06/image01.jpg"),-1===document.cookie.indexOf("eisrc_allocation_tool_acknowledged=1")&&(/eisrc.com$/.test(document.location.hostname)&&$("#disclaimerContent").html(eisrcDisclaimerContent),$("#myModal").modal()),$("#printPdf").on("click",function(){fundTableToPdf(svg.data()[0]),pdfMake.createPdf(dd).download("portfolio.pdf")}),$("#copyrightOwner").text(pdfParameterToPrint.copyrightOwner),$("#closeDisclaimerTop").on("click",function(){location.href="//www.google.com"}),$("#closeDisclaimerBottom").on("click",function(){location.href="//www.google.com"}),$("#acceptDisclaimerBottom").on("click",function(){document.cookie="eisrc_allocation_tool_acknowledged=1; path=/"}),userInputVM=new UserInputViewModel,ko.applyBindings(userInputVM,document.getElementById("allocationApp")),"Show Assumptions"===userInputVM.changeAssumptionsText()&&$(".additionalControls").hide(),allocateAsset(userInputVM),$('input[type="number"]').on("keydown",function(e){-1!==$.inArray(e.keyCode,[8,9,27,13,110])||65==e.keyCode&&!0===e.ctrlKey||35<=e.keyCode&&e.keyCode<=40||112<=e.keyCode&&e.keyCode<=123?13===e.keyCode&&handleSlideStop(e):190!=e.keyCode&&(e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault()}),$("input.number-with-comma").on("keyup",function(e){if(-1!==$.inArray(e.keyCode,[46,9,27,13,110])||65==e.keyCode&&!0===e.ctrlKey||35<=e.keyCode&&e.keyCode<=40||112<=e.keyCode&&e.keyCode<=123)13===e.keyCode&&handleSlideStop(e);else{8!=e.keyCode&&188!=e.keyCode&&(e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault();var t=Number($(this).val().replace(/,/g,"")),a=e.target,n=+a.getAttribute("min"),o=+a.getAttribute("max");t<n?t=n:o<t&&(t=o),$(this).val(t.toLocaleString())}}),$('.sliderContainer input[type="text"]').on("slideStop",{target:"slider"},handleSlideStop),$('input[type="number"]').on("blur",{target:"input-box"},handleSlideStop),$("input.number-with-comma").on("blur",{target:"input-box"},handleSlideStop),$('input[type="checkbox"]').on("click",function(e){userInputVM.isHighYield()?(userInputVM.selectedFundFamily("Yield Optimized Portfolio"),$("#el-select-portfolio").next().hide()):(userInputVM.selectedFundFamily("EISRC Standard Index Portfolio"),$("#el-select-portfolio").next().show()),handleSlideStop(e)}),$(".selectpicker").selectpicker({width:"180px"}),$("#current-year").text((new Date).getFullYear())});